dist: bionic
language: python
services:
  - docker
branches:
  except:
    - gh-pages
matrix:
  fast_finish: true
before_install:
  - sudo apt-get -qq update
  - sudo apt-get install fping
  - sudo apt-get install traceroute
  - sudo apt-get install librrd-dev
  - bash ./Ctl/dev/compose.sh build peeringdb
  - bash ./Ctl/dev/compose.sh up -d database
install:
  - python -m pip install -U pip
  - pip install -U setuptools
  - pip install tox
  - pip install tox-travis
  - pip install codecov
script:
  - bash ./Ctl/dev/run.sh run_tests
